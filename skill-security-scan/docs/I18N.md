# 国际化使用说明 (Internationalization)

## 概述

skill-security-scan 支持多语言界面，默认使用**中文**。

## 支持的语言

- `zh_CN` - 简体中文（默认）
- `en_US` - English

## 使用方法

### 方法 1: 通过命令行参数指定语言

```bash
# 使用中文（默认）
python -m src.cli scan /path/to/skill

# 使用英文
python -m src.cli --lang en_US scan /path/to/skill
```

### 方法 2: 通过环境变量设置语言

```bash
# Windows CMD
set SKILL_SCAN_LANG=en_US
python -m src.cli scan /path/to/skill

# Windows PowerShell
$env:SKILL_SCAN_LANG="en_US"
python -m src.cli scan /path/to/skill

# Linux/Mac
export SKILL_SCAN_LANG=en_US
python -m src.cli scan /path/to/skill
```

## 示例输出

### 中文输出

```bash
$ python -X utf8 -m src.cli scan tests/skills/malicious_skills --no-color

正在扫描: tests/skills/malicious_skills

[*] 扫描 Skill: tests/skills/malicious_skills

[!] Risk Level: CRITICAL (10.0/10)

[!] CRITICAL 问题 (67 个):
  [FILE001] 在 tests/skills/malicious_skills\README.md:27
    Pattern: - ❌ 读取 `~/.ssh/id_rsa`
    Confidence: 高
  ...

[*] 摘要:
  Total Files Scanned: 4
  Critical Issues: 67
  Warning Issues: 61
  Info Issues: 0
  Total Issues: 128

[*] 建议: 请勿使用 - 检测到严重安全风险
```

### 英文输出

```bash
$ python -X utf8 -m src.cli --lang en_US scan tests/skills/malicious_skills --no-color

Scanning: tests/skills/malicious_skills

[*] Scanning Skill: tests/skills/malicious_skills

[!] Risk Level: CRITICAL (10.0/10)

[!] CRITICAL Issues (67):
  [FILE001] in tests/skills/malicious_skills\README.md:27
    Pattern: - ❌ 读取 `~/.ssh/id_rsa`
    Confidence: HIGH
  ...

[*] Summary:
  Total Files Scanned: 4
  Critical Issues: 67
  Warning Issues: 61
  Info Issues: 0
  Total Issues: 128

[*] Recommendation: DO NOT USE THIS SKILL - Critical security risks detected
```

## 添加新语言

如果要添加新的语言支持：

1. 在 `src/i18n/` 下创建新语言目录，例如 `fr_FR/LC_MESSAGES/`
2. 复制 `skill_scan.pot` 到新目录并重命名为 `skill_scan.po`
3. 翻译 `.po` 文件中的所有字符串
4. 编译翻译文件：
   ```bash
   python -c "
   import polib
   po = polib.pofile('src/i18n/fr_FR/LC_MESSAGES/skill_scan.po')
   po.save_as_mofile('src/i18n/fr_FR/LC_MESSAGES/skill_scan.mo')
   "
   ```
5. 在 `src/i18n/__init__.py` 中添加语言：
   ```python
   SUPPORTED_LANGUAGES = {
       'zh_CN': '简体中文',
       'en_US': 'English',
       'fr_FR': 'Français'  # 新增
   }
   ```

## 注意事项

- 在 Windows 上使用时，建议加上 `-X utf8` 参数以确保正确显示中文：
  ```bash
  python -X utf8 -m src.cli scan /path/to/skill
  ```

- 翻译文件位于 `src/i18n/{lang}/LC_MESSAGES/skill_scan.mo`
- 修改翻译后需要重新编译 `.po` 文件为 `.mo` 文件
